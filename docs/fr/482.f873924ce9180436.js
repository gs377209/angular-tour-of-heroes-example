"use strict";(self.webpackChunkangular_tour_of_heroes_example=self.webpackChunkangular_tour_of_heroes_example||[]).push([[482],{6482:(B,T,n)=>{n.r(T),n.d(T,{CrisisCenterModule:()=>j});var u=n(6895),c=n(4006),D=n(2673),h=n(4859),a=n(3546),M=n(7392),v=n(4144),Z=n(6338),U=n(4385),m=n(9132),t=n(4650);let F=(()=>{class i{canDeactivate(e){return!e.canDeactivate||e.canDeactivate()}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),b=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crisis-center"]],decls:3,vars:0,template:function(e,s){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Crisis Center"),t.qZA(),t._UZ(2,"router-outlet"))},dependencies:[m.lC]}),i})(),A=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crisis-center-home"]],decls:2,vars:0,template:function(e,s){1&e&&(t.TgZ(0,"h3"),t._uU(1,"Welcome to the Crisis Center"),t.qZA())}}),i})();var $=n(529),g=n(9646),d=n(8505),p=n(262),x=n(4004),S=n(4206);let y=(()=>{class i{constructor(e,s){this.http=e,this.messageService=s,this.crisesUrl="api/crises",this.httpOptions={headers:new $.WM({"Content-Type":"application/json"})}}getCrises(){return this.http.get(this.crisesUrl).pipe((0,d.b)(()=>this.log("fetched crises")),(0,p.K)(this.handleError("getCrises",[])))}getCrisisNo404(e){return this.http.get(`${this.crisesUrl}/?id=${e}`).pipe((0,x.U)(o=>o[0]),(0,d.b)(o=>{this.log(`${o?"fetched":"did not find"} crisis id=${e}`)}),(0,p.K)(this.handleError(`getCrisis id=${e}`)))}getCrisis(e){return this.http.get(`${this.crisesUrl}/${e}`).pipe((0,d.b)(()=>this.log(`fetched crisis id=${e}`)),(0,p.K)(this.handleError(`getCrisis id=${e}`)))}searchCrises(e){return e.trim()?this.http.get(`${this.crisesUrl}/?name=${e}`).pipe((0,d.b)(s=>this.log(s.length?`found crises matching "${e}"`:`no crises matching "${e}"`)),(0,p.K)(this.handleError("searchCrises",[]))):(0,g.of)([])}addCrisis(e){return this.http.post(this.crisesUrl,e,this.httpOptions).pipe((0,d.b)(s=>this.log(`added crisis w/ id=${s.id}`)),(0,p.K)(this.handleError("addCrisis")))}deleteCrisis(e){return this.http.delete(`${this.crisesUrl}/${e}`,this.httpOptions).pipe((0,d.b)(()=>this.log(`deleted crisis id=${e}`)),(0,p.K)(this.handleError("deleteCrisis")))}updateCrisis(e){return this.http.put(this.crisesUrl,e,this.httpOptions).pipe((0,d.b)(()=>this.log(`updated crisis id=${e.id}`)),(0,p.K)(this.handleError("updateCrisis")))}handleError(e="operation",s){return o=>(console.error(o),this.log(`${e} failed: ${o.message}`),(0,g.of)(s))}log(e){this.messageService.add(`CrisisService: ${e}`)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG($.eN),t.LFG(S.e))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),L=(()=>{class i{confirm(e){const s=window.confirm(e||"Is it OK?");return(0,g.of)(s)}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var f=n(9549);function I(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"form")(1,"mat-card")(2,"mat-card-title"),t._uU(3),t.ALo(4,"uppercase"),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.TgZ(7,"mat-card-content")(8,"mat-form-field",1)(9,"mat-label"),t._uU(10,"Crisis name: "),t.qZA(),t.TgZ(11,"input",2),t.NdJ("ngModelChange",function(o){t.CHM(e);const l=t.oxw();return t.KtG(l.editName=o)}),t.qZA()()(),t.TgZ(12,"mat-card-actions")(13,"button",3),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.goBack(o.crisis))}),t._uU(14," go back "),t.qZA(),t.TgZ(15,"button",4),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.save(o.crisis))}),t._uU(16," save "),t.qZA()()()()}if(2&i){const e=t.oxw();t.xp6(3),t.hij("",t.lcZ(4,3,e.crisis.name)," Details"),t.xp6(3),t.hij("ID: ",e.crisis.id,""),t.xp6(5),t.Q6J("ngModel",e.editName)}}let N=(()=>{class i{constructor(e,s,o,l,C){this.route=e,this.crisisService=s,this.location=o,this.router=l,this.dialogService=C,this.editName=""}canDeactivate(){return!this.crisis||this.crisis.name===this.editName||this.dialogService.confirm("Discard changes?")}ngOnInit(){this.getCrisis()}getCrisis(){this.route.data.subscribe(e=>{const s=e.crisis;this.editName=s.name,this.crisis=s})}goBack(e){this.gotoCrises(e)}gotoCrises(e){this.router.navigate(["../",{id:e?e.id:null,foo:"foo"}],{relativeTo:this.route})}save(e){e&&(this.crisis=e,this.crisis.name=this.editName,this.crisisService.updateCrisis(e).subscribe(()=>this.gotoCrises(e)))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(m.gz),t.Y36(y),t.Y36(u.Ye),t.Y36(m.F0),t.Y36(L))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crisis-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],["appearance","fill"],["matInput","","placeholder","name","name","name",3,"ngModel","ngModelChange"],["mat-raised-button","","color","accent","type","button",3,"click"],["mat-raised-button","","color","primary","type","submit",3,"click"]],template:function(e,s){1&e&&t.YNc(0,I,17,5,"form",0),2&e&&t.Q6J("ngIf",s.crisis)},dependencies:[u.O5,c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,f.KE,f.hX,a.a8,a.dn,a.n5,a.$j,a.hq,h.lW,v.Nt,u.gd],styles:["mat-card[_ngcontent-%COMP%]{margin-bottom:1rem}"]}),i})();var O=n(5577),K=n(515);let Y=(()=>{class i{constructor(e,s){this.cs=e,this.router=s}resolve(e){const s=parseInt(e.paramMap.get("id")??"",10);return this.cs.getCrisis(s).pipe((0,O.z)(o=>o?(0,g.of)(o):(this.router.navigate(["/crisis-center"]),K.E)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(y),t.LFG(m.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var E=n(3900);const J=function(i){return["/crisis-center",i]};function G(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"mat-list-item",6)(1,"a",7),t._uU(2),t.qZA(),t.TgZ(3,"button",8),t.NdJ("click",function(){const l=t.CHM(e).$implicit,C=t.oxw();return t.KtG(C.delete(l))}),t.TgZ(4,"mat-icon"),t._uU(5,"close"),t.qZA()()()}if(2&i){const e=r.$implicit,s=t.oxw();t.xp6(1),t.ekj("selected",e.id===s.selectedId),t.Q6J("matBadge",e.id)("routerLink",t.VKq(5,J,e.id)),t.xp6(1),t.hij(" ",e.name," ")}}const z=[{path:"",title:"Crisis Center",component:b,data:{animation:"crisisCenter"},children:[{path:"",component:(()=>{class i{constructor(e,s){this.crisisService=e,this.route=s,this.selectedId=0}ngOnInit(){this.getCrises()}getCrises(){this.crises$=this.route.paramMap.pipe((0,E.w)(e=>(this.selectedId=parseInt(e.get("id")??"",10),this.crisisService.getCrises())))}add(e){(e=e.trim())&&this.crisisService.addCrisis({name:e}).subscribe(()=>{this.getCrises()})}delete(e){this.crisisService.deleteCrisis(e.id).subscribe(()=>{this.getCrises()})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(y),t.Y36(m.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-crisis-list"]],decls:25,vars:3,consts:[["appearance","fill"],["matInput","","id","new-crisis","placeholder","name"],["crisisName",""],["mat-raised-button","","color","primary","type","submit",1,"add-button",3,"click"],["role","list",1,"crises"],["role","listitem",4,"ngFor","ngForOf"],["role","listitem"],["mat-raised-button","","color","primary","matBadgePosition","before","matBadgeColor","accent",3,"matBadge","routerLink"],["mat-icon-button","","color","warn","type","button","aria-label","Delete Crisis","title","delete crisis",1,"delete",3,"click"]],template:function(e,s){if(1&e){const o=t.EpF();t.TgZ(0,"h2"),t._uU(1,"My Crises"),t.qZA(),t.TgZ(2,"form")(3,"mat-card")(4,"mat-card-title"),t._uU(5,"Add Crisis"),t.qZA(),t.TgZ(6,"mat-card-subtitle"),t._uU(7,"Don't you want more???"),t.qZA(),t.TgZ(8,"mat-card-content")(9,"mat-form-field",0)(10,"mat-label"),t._uU(11,"Crisis name: "),t.qZA(),t._UZ(12,"input",1,2),t.qZA()(),t.TgZ(14,"mat-card-actions")(15,"button",3),t.NdJ("click",function(){t.CHM(o);const C=t.MAs(13);return s.add(C.value),t.KtG(C.value="")}),t._uU(16," Add crisis "),t.qZA()()()(),t.TgZ(17,"mat-card")(18,"mat-card-title"),t._uU(19,"Crises"),t.qZA(),t.TgZ(20,"mat-card-content")(21,"mat-list",4),t.YNc(22,G,6,7,"mat-list-item",5),t.ALo(23,"async"),t.qZA()()(),t._UZ(24,"router-outlet")}2&e&&(t.xp6(22),t.Q6J("ngForOf",t.lcZ(23,1,s.crises$)))},dependencies:[u.sg,c._Y,c.JL,c.F,Z.i$,Z.Tg,D.k,M.Hw,f.KE,f.hX,a.a8,a.dn,a.n5,a.$j,a.hq,h.lW,h.zs,v.Nt,m.lC,m.yS,u.Ov],styles:["mat-list-item[_ngcontent-%COMP%]{margin-top:.5rem}mat-list-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{min-width:200px}mat-card[_ngcontent-%COMP%]{margin-bottom:1rem}.selected[_ngcontent-%COMP%]{background-color:#00f}"]}),i})(),title:"Crises",data:{animation:"crisisCenter"},children:[{path:":id",title:"Crisis Detail",component:N,canDeactivate:[F],resolve:{crisis:Y},data:{animation:"crisisDetail"}},{path:"",title:"Crisis Home",component:A,data:{animation:"crisisCenter"}}]}]}];let H=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[m.Bz.forChild(z),m.Bz]}),i})(),j=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.ez,c.u5,Z.ie,D.g,M.Ps,U.LD,a.QW,h.ot,v.c,H]}),i})()}}]);